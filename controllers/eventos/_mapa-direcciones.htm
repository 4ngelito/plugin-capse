<div id="map"></div>
<script>
  function initMap() {
    var myLatLng = {lat: -33.451190, lng: -70.654388};

    // Create a map object and specify the DOM element for display.
    var map = new google.maps.Map(document.getElementById('map'), {
      center: myLatLng,
      scrollwheel: false,
      zoom: 4
    });

    <?php 
    $n = 0;
	foreach($geocodes as $g){
		echo "var marker{$n} = new google.maps.Marker({ 
	      map: map, 
	      position: { lat: {$g['geocode']['location']['lat']},  lng: {$g['geocode']['location']['lng']} }, 
	      title: {$g['titulo']} 
	    }); 
  ";
	    $n++;
	}
	?>
  }

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=<?php echo $gMapsApiKey; ?>&callback=initMap" async defer></script>